<%page expression_filter="h"/>
<%!
from django.utils.translation import ugettext as _

from openedx.core.djangolib.markup import HTML, Text

#GEOFFREY
import datetime
current_date = int(datetime.datetime.now().strftime("%s"))
from openedx.core.djangoapps.content.course_overviews.models import CourseOverview
from openedx.core.djangoapps.models.course_details import CourseDetails
from opaque_keys.edx.keys import CourseKey
from lms.djangoapps.courseware.courses import get_course_by_id
from student.roles import CourseInstructorRole,CourseStaffRole
import logging
from openedx.core.djangoapps.site_configuration.models import SiteConfiguration
orgs = SiteConfiguration.get_all_orgs()
log = logging.getLogger(__name__)
%>

<%inherit file="base.html" />

<%def name="online_help_token()"><% return "home" %></%def>
<%block name="title">${_("{studio_name} Home").format(studio_name=settings.STUDIO_SHORT_NAME)}</%block>
<%block name="bodyclass">is-signedin index view-dashboard</%block>

<%block name="requirejs">
  require(["js/factories/index"], function (IndexFactory) {
      IndexFactory();
  });

  //require(["https://demo-atp.themoocagency.com/media/index-bis.js"]);
  require(['${static.url("js/atp/index.js")}']);
</%block>
<%namespace name='static' file='static_content.html'/>
<%block name="content">

<link rel="stylesheet" type="text/css" href="${static.url('css/index.css')}">
<link rel="stylesheet" type="text/css" href="${static.url('css/index_sub.css')}">
<style>
.course-item .img_fundamentals,.course-item .img_regulatory,.course-item .img_fundamental,.course-item .img_oursolutions,.course-item .img_salesapproach, .course-item .img_softskills, .course-item .img_expert {
  position: absolute;
  bottom: 0;
  right: 0;
  width: 75%;
  height: 127px;
  z-index: 2;
  background-position: center;
  background-repeat: no-repeat;
  background-size: cover;
  outline: none;
  border: none !important;
  border-left-color: transparent !important;
}
.course-item .img_fundamental {
  background-image: url("${static.url('images/fondamentaux.png')}");
}
.course-item .img_fundamentals {
  background-image: url("${static.url('images/fondamentaux.png')}");
}
.course-item .img_oursolutions {
  background-image: url("${static.url('images/nos_solutions.png')}");
}
.course-item .img_salesapproach {
  background-image: url("${static.url('images/zdemarche_comm.png')}");
}
.course-item .img_regulatory {
  background-image: url("${static.url('images/reglementaire.png')}");
}
.course-item .img_softskills {
  background-image: url("${static.url('images/softskills.png')}");
}
.course-item .img_expert {
  background-image: url("${static.url('images/expert.png')}");
}

.is_block_clear {
  display: block;
  clear: both;
}
#search_block input, #search_block button,#search_block_campaign input, #search_block_campaign button {
  float: left;
  display: block;
}
#search_block_campaign button {
  width: 38px;
  height: 38px;
}
#search_block button {
  width: 38px;
  height: 38px;
}
#search_block_campaign button,#search_block_campaign button:focus,#search_block_campaign button:hover,#search_block button,#search_block button:focus,#search_block button:hover {
  color: #fff !important;
  background-color: #31aeee !important;
  border: none !important;
  box-shadow: none !important;
  text-shadow: none !important;
  background-image: url("${static.url('images/search.png')}");
  background-position: center;
  background-repeat: no-repeat;
}
#search_block_campaign input,#search_block input {
  width: calc(100% - 38px);
  height: 38px;
  border-radius: 0px;
  border-right: none !important;
}
.up_list_courses p{
  width: 100%!important;
  line-height: 1.3;
}
.title-page-back{
  text-transform: initial!important;
}

/* Page Titles */
#main-header-wrapper{
  margin: 0!important;
  padding: 0!important;
  margin-bottom: 15px!important;
  padding-bottom: 0!important;
}
header{
  margin:0!important;
  padding-top: 30px!important;
  padding-bottom: 0px!important;
}
.page-header{
  float: none!important;
  text-transform: initial!important;
}
.page-sub-header{
  margin-top: 30px;
}

</style>
<%
log.info("timer 4 {}".format(datetime.datetime.now()))
%>



<!-- BLOC TITRE ET ONGLETS NAV NOUVEAU COURS / NOUVELLE BIBLIOTHEQUE HIDDEN -->
<div  id="main-header-wrapper" class="wrapper-mast wrapper">
  <header class="mast has-actions">
    <h1 class="page-header">${_("Welcome to your training modules management interface")}</h1>
    <h2 class="page-sub-header">${_("You can browse within two separate universes")} :</h2>
    % if user.is_active:
    <nav class="nav-actions" aria-label="${_('Page Actions')}">
      <h3 class="sr">${_("Page Actions")}</h3>
      <ul>
        <li class="nav-item">
          % if course_creator_status=='granted':
          <a href="#" class="button new-button new-course-button"><span class="icon fa fa-plus icon-inline" aria-hidden="true"></span>
              ${_("New Course")}</a>
          % elif course_creator_status=='disallowed_for_this_site' and settings.FEATURES.get('STUDIO_REQUEST_EMAIL',''):
          <a href="mailto:${settings.FEATURES.get('STUDIO_REQUEST_EMAIL','')}">${_("Email staff to create course")}</a>
          % endif

          % if show_new_library_button:
            <a href="#" class="button new-button new-library-button"><span class="icon fa fa-plus icon-inline" aria-hidden="true"></span>
            ${_("New Library")}</a>
          % endif

          % if is_programs_enabled:
            <a href=${program_authoring_url + 'new'} class="button new-button new-program-button"><span class="icon fa fa-plus icon-inline" aria-hidden="true"></span>
            ${_("New Program")}</a>
          % endif
        </li>
      </ul>
    </nav>
    % endif
  </header>
</div>



<div class="wrapper-content wrapper">
  % if user.is_active:
  <section class="content">
    <article class="content-primary" role="main">


<!-- FORMULAIRE DE CREATION DE MODULE/COURS -->
      % if course_creator_status=='granted':
      <div class="wrapper-create-element wrapper-create-course">
        <form class="form-create create-course course-info" id="create-course-form" name="create-course-form">
          <div class="wrap-error">
            <div id="course_creation_error" name="course_creation_error" class="message message-status message-status error" role="alert">
            <p>${_("Please correct the highlighted fields below.")}</p>
            </div>
          </div>
          <div class="wrapper-form">
            <h3 class="title">${_("Create a New Course")}</h3>

            <fieldset>
              <legend class="sr">${_("Required Information to Create a New Course")}</legend>

              <ol class="list-input">
                <li class="field text required" id="field-course-name">
                  <label for="new-course-name">${_("Course Name")}</label>
                  ## Translators: This is an example name for a new course, seen when
                  ## filling out the form to create a new course.
                  <input class="new-course-name" id="new-course-name" type="text" name="new-course-name" required placeholder="${_('e.g. Introduction to Computer Science')}" aria-describedby="tip-new-course-name tip-error-new-course-name" />
                  <span class="tip" id="tip-new-course-name">${_("The public display name for your course. This cannot be changed, but you can set a different display name in Advanced Settings later.")}</span>
                  <span class="tip tip-error is-hiding" id="tip-error-new-course-name"></span>
                </li>
                <li class="field text required" id="field-organization">
                  <label for="new-course-org">${_("Organization")}</label>
                  ## Translators: This is an example for the name of the organization sponsoring a course, seen when filling out the form to create a new course. The organization name cannot contain spaces.
                  ## Translators: "e.g. UniversityX or OrganizationX" is a placeholder displayed when user put no data into this field.
                  <input class="new-course-org" id="new-course-org" type="text" name="new-course-org" required placeholder="${_('e.g. UniversityX or OrganizationX')}" aria-describedby="tip-new-course-org tip-error-new-course-org" />
                  <span class="tip" id="tip-new-course-org">${Text(_("The name of the organization sponsoring the course. {strong_start}Note: The organization name is part of the course URL.{strong_end} This cannot be changed, but you can set a different display name in Advanced Settings later.")).format(
                      strong_start=HTML('<strong>'),
                      strong_end=HTML('</strong>'),
                  )}</span>
                  <span class="tip tip-error is-hiding" id="tip-error-new-course-org"></span>
                </li>
                <li class="field text required" id="field-course-number">
                  <label for="new-course-number">${_("Course Number")}</label>
                  ## Translators: This is an example for the number used to identify a course,
                  ## seen when filling out the form to create a new course. The number here is
                  ## short for "Computer Science 101". It can contain letters but cannot contain spaces.
                  <input class="new-course-number" id="new-course-number" type="text" name="new-course-number" required placeholder="${_('e.g. CS101')}" aria-describedby="tip-new-course-number tip-error-new-course-number" />
                  <span class="tip" id="tip-new-course-number">${Text(_("The unique number that identifies your course within your organization. {strong_start}Note: This is part of your course URL, so no spaces or special characters are allowed and it cannot be changed.{strong_end}")).format(
                      strong_start=HTML('<strong>'),
                      strong_end=HTML('</strong>'),
                  )}</span>
                  <span class="tip tip-error is-hiding" id="tip-error-new-course-number"></span>
                </li>

                <li class="field text required" id="field-course-run">
                  <label for="new-course-run">${_("Course Run")}</label>
                  ## Translators: This is an example for the "run" used to identify different
                  ## instances of a course, seen when filling out the form to create a new course.
                  <input class="new-course-run" id="new-course-run" type="text" name="new-course-run" required placeholder="${_('e.g. 2014_T1')}" aria-describedby="tip-new-course-run tip-error-new-course-run" />
                  <span class="tip" id="tip-new-course-run">${Text(_("The term in which your course will run. {strong_start}Note: This is part of your course URL, so no spaces or special characters are allowed and it cannot be changed.{strong_end}")).format(
                      strong_start=HTML('<strong>'),
                      strong_end=HTML('</strong>'),
                  )}</span>
                  <span class="tip tip-error is-hiding" id="tip-error-new-course-run"></span>
                </li>
              </ol>

            </fieldset>
          </div>

          <div class="actions">
            <input type="hidden" value="${allow_unicode_course_id}" class="allow-unicode-course-id" />
            <input type="submit" value="${_('Create')}" class="action action-primary new-course-save" />
            <input type="button" value="${_('Cancel')}" class="action action-secondary action-cancel new-course-cancel" />
          </div>
        </form>
      </div>
      % endif
<%
log.info("timer 6 {}".format(datetime.datetime.now()))
%>

<!-- FORMULAIRE DE CREATION DE LIBRAIRIES -->
      %if libraries_enabled and show_new_library_button:
      <div class="wrapper-create-element wrapper-create-library">
        <form class="form-create create-library library-info" id="create-library-form" name="create-library-form">
          <div class="wrap-error">
            <div id="library_creation_error" name="library_creation_error" class="message message-status message-status error" role="alert">
            <p>${_("Please correct the highlighted fields below.")}</p>
            </div>
          </div>

          <div class="wrapper-form">
            <h3 class="title">${_("Create a New Library")}</h3>
            <fieldset>
              <legend class="sr">${_("Required Information to Create a New Library")}</legend>
              <ol class="list-input">
                <li class="field text required" id="field-library-name">
                  <label for="new-library-name">${_("Library Name")}</label>
                  ## Translators: This is an example name for a new content library, seen when
                  ## filling out the form to create a new library.
                  ## (A library is a collection of content or problems.)
                  <input class="new-library-name" id="new-library-name" type="text" name="new-library-name" required placeholder="${_('e.g. Computer Science Problems')}" aria-describedby="tip-new-library-name tip-error-new-library-name" />
                  <span class="tip" id="tip-new-library-name">${_("The public display name for your library.")}</span>
                  <span class="tip tip-error is-hiding" id="tip-error-new-library-name"></span>
                </li>
                <li class="field text required" id="field-organization">
                  <label for="new-library-org">${_("Organization")}</label>
                  <input class="new-library-org" id="new-library-org" type="text" name="new-library-org" required placeholder="${_('e.g. UniversityX or OrganizationX')}" aria-describedby="tip-new-library-org tip-error-new-library-org" />
                  <span class="tip" id="tip-new-library-org">${_("The public organization name for your library.")} ${_("This cannot be changed.")}</span>
                  <span class="tip tip-error is-hiding" id="tip-error-new-library-org"></span>
                </li>
                <li class="field text required" id="field-library-number">
                  <label for="new-library-number">${_("Library Code")}</label>
                  ## Translators: This is an example for the "code" used to identify a library,
                  ## seen when filling out the form to create a new library. This example is short
                  ## for "Computer Science Problems". The example number may contain letters
                  ## but must not contain spaces.
                  <input class="new-library-number" id="new-library-number" type="text" name="new-library-number" required placeholder="${_('e.g. CSPROB')}" aria-describedby="tip-new-library-number tip-error-new-library-number" />
                  <span class="tip" id="tip-new-library-number">${Text(_("The unique code that identifies this library. {strong_start}Note: This is part of your library URL, so no spaces or special characters are allowed.{strong_end} This cannot be changed.")).format(
                      strong_start=HTML('<strong>'),
                      strong_end=HTML('</strong>'),
                  )}</span>
                  <span class="tip tip-error is-hiding" id="tip-error-new-library-number"></span>
                </li>
              </ol>
            </fieldset>
          </div>

          <div class="actions">
            <input type="hidden" value="${allow_unicode_course_id}" class="allow-unicode-course-id" />
            <input type="submit" value="${_('Create')}" class="action action-primary new-library-save" />
            <input type="button" value="${_('Cancel')}" class="action action-secondary action-cancel new-library-cancel" />
          </div>
        </form>
      </div>
      % endif

<%
log.info("timer 7 {}".format(datetime.datetime.now()))
%>

<!-- FORMULAIRE DE CREATION DE MICROSITE -->
      % if request.user.is_staff:
      <div class="wrapper-create-element wrapper-create-microsite">
        <form class="form-create create-microsite microsite-info" id="create-microsite-form" name="create-microsite-form" enctype="multipart/form-data">
          <div class="wrap-error">
            <div id="microsite_creation_error" name="microsite_creation_error" class="message message-status message-status error" role="alert">
            <p>Please correct the highlighted fields below.</p>
            </div>
          </div>

          <div class="wrapper-form">
            <h3 class="title">Create a New Microsite</h3>

            <fieldset>
              <legend class="sr">Required Information to Create a New Microsite</legend>

              <ol class="list-input">
                <li class="field text required" id="field-microsite-name">
                  <label for="new-microsite-name">Microsite Name</label>
                  <input class="new-microsite-name" id="new-microsite-name" type="text" name="display_name" required="" placeholder="e.g. XYZ" aria-describedby="tip-new-microsite-name tip-error-new-microsite-name">
                  <span class="tip tip-error is-hiding" id="tip-error-new-microsite-name"></span>
                </li>
                <li class="field file required" id="field-microsite-logo">
                  <label for="new-microsite-logo">Microsite White Logo</label>
                  <input class="new-microsite-logo" id="new-microsite-logo" type="file" name="logo" required="" aria-describedby="tip-new-microsite-logo tip-error-new-microsite-logo">
                  <span class="tip tip-error is-hiding" id="tip-error-new-microsite-logo"></span>
                </li>
                <li class="field file required" id="field-microsite-logo-couleur">
                  <label for="new-microsite-logo-couleur">Microsite Logo Color</label>
                  <input class="new-microsite-logo-couleur" id="new-microsite-logo-couleur" type="file" name="logo-couleur" required="" aria-describedby="tip-new-microsite-logo-couleur tip-error-new-microsite-logo-couleur">
                  <span class="tip tip-error is-hiding" id="tip-error-new-microsite-logo-couleur"></span>
                </li>
                <li class="field color required" id="field-microsite-new-microsite-primary_color">
                  <label for="new-microsite-new-microsite-primary_color">Microsite primary color</label>
                  <input type="text" class="new-microsite-new-microsite-primary_color" id="new-microsite-primary_color" name="primary_color" required="" aria-describedby="tip-new-microsite-new-microsite-primary_color tip-error-new-microsite-new-microsite-primary_color">
                  <span class="tip tip-error is-hiding" id="tip-error-new-microsite-new-microsite-primary_color"></span>
                </li>
                <li class="field color required" id="field-microsite-secondary_color">
                  <label for="new-microsite-color">Microsite secondary color</label>
                  <input type="text" class="new-microsite-secondary_color" id="new-microsite-secondary_color" name="secondary_color" required="" aria-describedby="tip-new-microsite-secondary_color tip-error-new-microsite-secondary_color">
                  <span class="tip tip-error is-hiding" id="tip-error-new-microsite-secondary_color"></span>
                </li>
                <li class="field color required" id="field-microsite-contact">
                  <label for="new-microsite-contact">Microsite technical support address</label>
                  <input type="text" class="new-microsite-contact" id="new-microsite-contact" name="contact" required="" aria-describedby="tip-new-microsite-contact tip-error-new-microsite-contact" placeholder="ex support@company.com">
                  <span class="tip tip-error is-hiding" id="tip-error-new-microsite-contact"></span>
                </li>
                <li class="field color required" id="field-microsite-trademark">
                  <label for="new-microsite-trademark">Microsite trademark</label>
                  <input type="text" class="new-microsite-trademark" id="new-microsite-trademark" name="trademark" required="" aria-describedby="tip-new-microsite-trademark tip-error-new-microsite-trademark" placeholder="ex © Amundi 2018">
                  <span class="tip tip-error is-hiding" id="tip-error-new-microsite-trademark"></span>
                </li>
                <li class="field color required" id="field-microsite-trademark">
                  <label for="new-microsite-trademark">Microsite Disclaimer</label>
                  <textarea name="disclaimer" rows="10" class="new-microsite-disclaimer" id="new-microsite-disclaimer" name="disclaimer" required="" aria-describedby="tip-new-microsite-disclaimer tip-error-new-microsite-disclaimer"></textarea>
                  <span class="tip tip-error is-hiding" id="tip-error-new-microsite-trademark"></span>
                </li>
                <li class="field select required" id="field-microsite-amundibrand">
                  <label for="new-microsite-amundibrand">AmundiAcademy Brand</label>
                  <select class="input new-microsite-amundibrand select language-selector" id="amundi-brand" name="amundi_brand">
                    <option value="true">Display</value>
                    <option value="false">Hide</value>
                  </select>
                </li>
                <li class="field select required" id="field-microsite-language">
                  <input type="hidden" id="csrf_token" name="csrfmiddlewaretoken" value="Pk4rfUS0ea5LpsHOnRyt5DELzIHQVpa4">
                  <label for="new-microsite-language">Choose Language</label>
                  <select class="input new-microsite-language select language-selector" id="language-value" name="language_code">
                    <option value="fr">Français</value>
                    <option value="en">English</value>
                  </select>
                </li>
              </ol>
            </fieldset>
          </div>

          <div class="actions">
            <input type="hidden" value="False" class="allow-unicode-course-id">
            <input type="submit" value="Create" class="action action-primary new-microsite-save">
            <input type="button" value="Cancel" class="action action-secondary action-cancel new-microsite-cancel">
          </div>
        </form>
      </div>
      % endif


      <!-- STATE: processing courses -->
      %if allow_course_reruns and rerun_creator_status and len(in_process_course_actions) > 0:
      <div class="courses courses-processing">
          <h3 class="title">${_("Courses Being Processed")}</h3>

          <ul class="list-courses">
            %for course_info in sorted(in_process_course_actions, key=lambda s: s['display_name'].lower() if s['display_name'] is not None else ''):
            <!-- STATE: re-run is processing -->
            %if course_info['is_in_progress']:
            <li class="wrapper-course has-status" data-course-key="${course_info['course_key']}">
              <div class="course-item course-rerun is-processing">
                <div class="course-details" href="#">
                  <h3 class="course-title">${course_info['display_name']}</h3>

                  <div class="course-metadata">
                    <span class="course-org metadata-item">
                      <span class="label">${_("Organization:")}</span> <span class="value">${course_info['org']}</span>
                    </span>
                    <span class="course-num metadata-item">
                      <span class="label">${_("Course Number:")}</span>
                      <span class="value">${course_info['number']}</span>
                    </span>
                    <span class="course-run metadata-item">
                      <span class="label">${_("Course Run:")}</span> <span class="value">${course_info['run']}</span>
                    </span>
                  </div>
                </div>

                <dl class="course-status">
                  <dt class="label sr">${_("This course run is currently being created.")}</dt>
                  <dd class="value">
                    <span class="icon fa fa-refresh fa-spin" aria-hidden="true"></span>
                    ## Translators: This is a status message, used to inform the user of
                    ## what the system is doing. This status means that the user has
                    ## requested to re-run an existing course, and the system is currently
                    ## in the process of duplicating and configuring the existing course
                    ## so that it can be re-run.
                    <span class="copy">${_("Configuring as re-run")}</span>
                  </dd>
                </dl>
              </div>

              <div class="status-message">
                <p class="copy">${Text(_('The new course will be added to your course list in 5-10 minutes. Return to this page or {link_start}refresh it{link_end} to update the course list. The new course will need some manual configuration.')).format(
                    link_start=HTML('<a href="#" class="action-reload">'),
                    link_end=HTML('</a>'),
                  )}</p>
              </div>
            </li>
            %endif


            <!-- STATE: re-run has error -->
            %if course_info['is_failed']:
            <li class="wrapper-course has-status" data-course-key="${course_info['course_key']}">
              <div class="course-item course-rerun has-error">
                <div class="course-details" href="#">
                  <h3 class="course-title">${course_info['display_name']}</h3>

                  <div class="course-metadata">
                    <span class="course-org metadata-item">
                      <span class="label">${_("Organization:")}</span> <span class="value">${course_info['org']}</span>
                    </span>
                    <span class="course-num metadata-item">
                      <span class="label">${_("Course Number:")}</span>
                      <span class="value">${course_info['number']}</span>
                    </span>
                    <span class="course-run metadata-item">
                      <span class="label">${_("Course Run:")}</span> <span class="value">${course_info['run']}</span>
                    </span>
                  </div>
                </div>

                <dl class="course-status">
                  ## Translators: This is a status message for the course re-runs feature.
                  ## When a course admin indicates that a course should be re-run, the system
                  ## needs to process the request and prepare the new course. The status of
                  ## the process will follow this text.
                  <dt class="label sr">${_("This re-run processing status:")}</dt>
                  <dd class="value">
                    <span class="icon fa fa-warning" aria-hidden="true"></span>
                    <span class="copy">${_("Configuration Error")}</span>
                  </dd>
                </dl>
              </div>

              <div class="status-message has-actions">
                <p class="copy">${_("A system error occurred while your course was being processed. Please go to the original course to try the re-run again, or contact your PM for assistance.")}</p>

                <ul  class="status-actions">
                  <li class="action action-dismiss">
                    <a href="#" class="button dismiss-button" data-dismiss-link="${course_info['dismiss_link']}">
                      <span class="icon fa fa-times-circle" aria-hidden="true"></span>
                      <span class="button-copy">${_("Dismiss")}</span>
                    </a>
                  </li>
                </ul>
              </div>
            </li>
            %endif
            %endfor
          </ul>
      </div>
      %endif


<!-- ONGLETS DE NAVIGATION -->
      % if libraries_enabled or is_programs_enabled:
      <ul id="course-index-tabs">
        <li class="sub_menu"><button id="my-campaigns" class="active_button" data-sub="all" onclick="var bLazy = new Blazy(); bLazy.revalidate();">${_('My campaigns')}</button></li>
        <li class="sub_menu"><button id="my-modules" data-sub="template" onclick="var bLazy = new Blazy(); bLazy.revalidate();">${_('My modules')}</button></li>
          % if request.user.is_staff:
        <li class="sub_menu"><button data-sub="microsites" onclick="var bLazy = new Blazy(); bLazy.revalidate();">${_('Microsites')}</button></li>
            %if len(libraries) > 0:
        <li class="sub_menu"><button data-sub="libraries-tab">${_('Libraries')}</button></li>
            % endif
          % endif
      </ul>
      % endif


<%
log.info("timer 8 {}".format(datetime.datetime.now()))
%>

<!-- SI AU MOINS UN MODULE -->
      %if len(courses) > 0:
<!-- CALCUL NOMBRE DE CAMPAGNES -->
        <%
        course_num_utils = 0
        for course_info in sorted(courses, key=lambda s: s['display_name'].lower() if s['display_name'] is not None else ''):
          if not 'AMUNDI-GENERIC-TEMPLATE' in course_info['display_name']:
            course_num_utils = course_num_utils + 1
        %>


<!-- SI AUCUNE CAMPAGNE -->
        %if course_num_utils == 0:
        <style>
        .view-dashboard .content-supplementary {
          top: 0 !important;
          z-index: 1000000;
        }
        .message_atp_no_course {
      	  width: 100%;
      	  text-align: center;
          font-style: italic;
      	  font-weight: bold;
        }
          #no_course{
            display: none!important;
          }
          #course-index-tabs li:first-child{
            display: none;
          }
          .up_list_courses{
            display: block;
          }
          .page-sub-header{
            display: none!important;
          }
          .modules_items{
            display: block!important;
          }
          #my-modules{
            color: #31aeee;
            border-bottom: 3px solid #31aeee;
          }
        </style>
        <div class="courses courses-tab active">
          <div id="no_course">
            <p>${_("No training campaign has been set")}.</p>
            <p>${_("To launch a training campaign")}, ${_("select a training module in")} <span>${_("My Modules")}</span></button>, ${_("then click on")} <span>${_("Create my campaign")}</span>.</p>
            <p class="message_atp_no_course">${_("No training campaign has been launched yet.")}</p>
	        </div>
        </div>


<!-- SI AU MOINS UNE CAMPAGNE DISPO-->
        % else:
        <span id="courses_listing_all">
  <!-- CAMPAGNES CREES -->
            <div class="up_list_courses">
              <h3>
                <img src="${static.url('images/campagne_prgrammee.svg')}" class='svg svg-class-title' />
                <span style="text-transform:initial;">${_('Created training campaigns')}</span>
              </h3>
              <p>${_("The following training campaigns have not been launched yet (starting date not exceeded).")}
                <br>
                ${_("To launch your campaign, please click on ")} « ${_("Manage my campaign")} » ${_("and set up starting date at today.")}
            </div>
            <ul class="list-courses my_campaign_listing">
            %if course_scheduled:
              %for _c_s in course_scheduled:
                % for q in _c_s:
                    <%
                    course_info = q['course_info']
                    course_key_id = q['course_key_id']
                    is_true = q['is_true']
                    courses_overviews = q['courses_overviews']
                    courses_stats = q['courses_stats']
                    categories = q['categories']
                    course_img = q['course_img']
                    course_start = q['course_start']
                    course_end = q['course_end']
                    course_end_compare = q['course_end_compare']
                    course_start_compare = q['course_start_compare']
                    duration = q['duration']
                    course_key_id_cleared=str(course_key_id).replace('+','').replace(':','')
                    %>

                    <div id="${course_key_id_cleared}"></div>
                    <li class="course-item campaign_items" data-course-key="${course_info['course_key']}" data-search="${categories.lower().replace(' ','')}" data-status="all">
                      <div class="content_img">
                        <span class="img_${categories.lower().replace(' ','')}" /></span>
                        <img src="blank.gif" data-src="${course_img['raw']}" class="img_course b-lazy"/>
                        <span class="course_module_categ">${_(categories)}</span>
                      </div>
                      <div class="content_info">
                        % if request.user.is_staff:
                          <a class="course-link" href="${course_info['url']}">
                        % else:
                          <a class="course-link" href="#">
                        % endif
                          <h3 class="course-title">${course_info['display_name']}</h3>
                        </a>
                        <div class="all_dates">
                          <ul>
                            <li><span>${_('Starting date')} :</span> <span>${course_start}</span></li>
                            <li><span>${_('Ending date')} :</span> <span>${course_end}</span></li>
                            <span style="display:block;clear:left;"></span>
                          </ul>
                        </div>
                        <div class="all_dates">
                          <ul>
                            <li><span>${course_info['org']}</span></li>
                            <span class="language_display">${_('Language')} : ${_(language_options_dict[courses_stats.language])} </span>
                            <span style="display:block;clear:left;"></span>
                          </ul>
                        </div>
                        <div class="duration_course">
                          <img src="${static.url('images/duree.svg')}" class='svg timer_svg_color' />
                          <span>${duration}</span>
                        </div>
                        <ul class="more_about_courses">
                          <li><a href="${settings.LMS_ROOT_URL.replace('https://','https://'+course_info['org']+'.')}/courses/${course_info['course_key']}/about" target="_blank">${_('About the training module')}</a></li>
                          <li><a href="/settings/manage/${course_info['course_key']}">${_('Manage my campaign')}</a></li>
                          <!--<li><a href="/settings/invite/${course_info['course_key']}">${_('Invite participants')}</a></li>
                          <li><a href="/settings/email_dashboard/${course_info['course_key']}">${_('Send email to participants')}</a></li>
                          <li><a href="${settings.LMS_ROOT_URL.replace('https://','https://'+course_info['org']+'.')}/courses/${course_info['course_key']}/stat_dashboard" target="_blank">${_('Statistics')}</a></li>-->
                          % if request.user.is_staff:
                          <li><a class="course-link" href="${course_info['url']}">${_('Course administration')}</a></li>
                          % endif
                        </ul>
                      </div>
                      <span style="clear:left;display:block;"></span>
                    </li>
                %endfor
              %endfor
              %endif
            </ul>

    <!-- CAMPAGNES EN COURS -->
            <div class="up_list_courses next_list">
              <h3>
                <img src="${static.url('images/campagne_encours.svg')}" class='svg svg-class-title' />
                <span style="text-transform:initial;">${_('In progress training campaigns')}</span>
              </h3>
              <p>${_("The following training campaigns have not been launched yet (starting date not exceeded).")}
                <br>
                ${_("To modify ending date, please click on")} « ${_('Manage my campaign')} ».
                <br>
                ${_("To add new participants, please click on")} « ${_("Invite participants")} » . ${_("To access statistics, please click on")} « ${_("Statistics")} ».</p>
            </div>
            <ul class="list-courses my_campaign_listing">
              <!-- new script -->
            %if course_in_progress:
              %for c_i_p in course_in_progress:
                % for q in c_i_p:
                    <%
                    course_info = q['course_info']
                    course_key_id = q['course_key_id']
                    is_true = q['is_true']
                    courses_overviews = q['courses_overviews']
                    courses_stats = q['courses_stats']
                    categories = q['categories']
                    course_img = q['course_img']
                    course_start = q['course_start']
                    course_end = q['course_end']
                    course_end_compare = q['course_end_compare']
                    course_start_compare = q['course_start_compare']
                    duration = q['duration']
                    course_key_id_cleared=str(course_key_id).replace('+','').replace(':','')
                    %>

                    <div id="${course_key_id_cleared}"></div>
                    <li class="course-item campaign_items" data-course-key="${course_info['course_key']}" data-search="${categories.lower().replace(' ','')}" data-status="all">
                      <div class="content_img">
                        <span class="img_${categories.lower().replace(' ','')}" /></span>
                        <img src="blank.gif" data-src="${course_img['raw']}" class="img_course b-lazy"/>
                        <span class="course_module_categ">${_(categories)}</span>
                      </div>
                      <div class="content_info">
                        % if request.user.is_staff:
                          <a class="course-link" href="${course_info['url']}">
                        % else:
                          <a class="course-link" href="#">
                        % endif
                          <h3 class="course-title">${course_info['display_name']}</h3>
                        </a>
                        <div class="all_dates">
                          <ul>
                            <li><span>${_('Starting date')} :</span> <span>${course_start}</span></li>
                            <li><span>${_('Ending date')} :</span> <span>${course_end}</span></li>
                            <span style="display:block;clear:left;"></span>
                          </ul>
                        </div>
                        <div class="all_dates">
                          <ul>
                            <li><span>${course_info['org']}</span></li>
                            <span class="language_display">${_('Language')} : ${_(language_options_dict[courses_stats.language])} </span>
                            <span style="display:block;clear:left;"></span>
                          </ul>
                        </div>
                        <div class="duration_course">
                          <img src="${static.url('images/duree.svg')}" class='svg timer_svg_color' />
                          <span>${duration}</span>
                        </div>
                        <ul class="more_about_courses">
                          <li><a href="${settings.LMS_ROOT_URL.replace('https://','https://'+course_info['org']+'.')}/courses/${course_info['course_key']}/about" target="_blank">${_('About the training module')}</a></li>
                          <li><a href="/settings/manage/${course_info['course_key']}">${_('Manage my campaign')}</a></li>
                          <li><a href="/settings/invite/${course_info['course_key']}">${_('Invite participants')}</a></li>
                          <li><a href="/settings/email_dashboard/${course_info['course_key']}">${_('Send email to participants')}</a></li>
                          <li><a href="${settings.LMS_ROOT_URL.replace('https://','https://'+course_info['org']+'.')}/courses/${course_info['course_key']}/stat_dashboard" target="_blank">${_('Statistics')}</a></li>
                          % if request.user.is_staff:
                          <li><a class="course-link" href="${course_info['url']}">${_('Course administration')}</a></li>
                          % endif
                        </ul>
                      </div>
                      <span style="clear:left;display:block;"></span>
                    </li>
                %endfor
              %endfor
            %endif
              <!-- new script -->
              % if request.user.is_staff:
                % if len(orgs)>0:
                  %for org in sorted(orgs):
                  <li class="course-item" data-status="microsites" style="display:none;">
                  <div class="content_img">
                    <a href="/update-microsite/${org}">
                      <img src="blank.gif" data-src="${settings.LMS_ROOT_URL}/media/microsite/${org}/images/${org}" class="img_course b-lazy"/>
                    </a>
                  </div>
                  <div class="content_info">
                    <a class="course-link" href="/update-microsite/${org}">
                      <h3 class="course-title">${org}</h3>
                    </a>
                  </div>
                  <span style="clear:left;display:block;"></span>
                    <ul class="more_about_courses">
                      <li><a href="https://${org}.${settings.SITE_NAME}">${_('Microsite')}</a></li>
                      <li><a href="/update-microsite/${org}">${_('Manage Microsite')}</a></li>
                      <li><a href="/admin-microsite/${org}">${_('Manage Microsite Admin')}</a></li>
                    </ul>
                  </li>
                  %endfor
                % endif
              % endif
            </ul>

    <!-- CAMPAGNES TERMINEES -->
            <div class="up_list_courses next_list">
              <h3>
                <img src="${static.url('images/campagne_terminee.svg')}" class='svg svg-class-title' />
                <span style="text-transform:initial;">${_('Completed training campaigns')}</span>
              </h3>
              <p>${_('The following training campaigns are completed (ending date is exceeded).')}
                <br>
                ${_('To access statistics, please click on.')} « ${_("Statistics")} ».</p>
            </div>
            <ul class="list-courses my_campaign_listing">
              <!-- new script -->
            %if course_completed:
              %for c_c in course_completed:
                % for q in c_c:
                    <%
                    course_info = q['course_info']
                    course_key_id = q['course_key_id']
                    is_true = q['is_true']
                    courses_overviews = q['courses_overviews']
                    courses_stats = q['courses_stats']
                    categories = q['categories']
                    course_img = q['course_img']
                    course_start = q['course_start']
                    course_end = q['course_end']
                    course_end_compare = q['course_end_compare']
                    course_start_compare = q['course_start_compare']
                    duration = q['duration']
                    course_key_id_cleared=str(course_key_id).replace('+','').replace(':','')
                    %>

                    <div id="${course_key_id_cleared}"></div>
                    <li class="course-item campaign_items" data-course-key="${course_info['course_key']}" data-search="${categories.lower().replace(' ','')}" data-status="all">
                      <div class="content_img">
                        <span class="img_${categories.lower().replace(' ','')}" /></span>
                        <img src="blank.gif" data-src="${course_img['raw']}" class="img_course b-lazy"/>
                        <span class="course_module_categ">${_(categories)}</span>
                      </div>
                      <div class="content_info">
                        % if request.user.is_staff:
                          <a class="course-link" href="${course_info['url']}">
                        % else:
                          <a class="course-link" href="#">
                        % endif
                          <h3 class="course-title">${course_info['display_name']}</h3>
                        </a>
                        <div class="all_dates">
                          <ul>
                            <li><span>${_('Starting date')} :</span> <span>${course_start}</span></li>
                            <li><span>${_('Ending date')} :</span> <span>${course_end}</span></li>
                            <span style="display:block;clear:left;"></span>
                          </ul>
                        </div>
                        <div class="all_dates">
                          <ul>
                            <li><span>${course_info['org']}</span></li>
                            <span class="language_display">${_('Language')} : ${_(language_options_dict[courses_stats.language])} </span>
                            <span style="display:block;clear:left;"></span>
                          </ul>
                        </div>
                        <div class="duration_course">
                          <img src="${static.url('images/duree.svg')}" class='svg timer_svg_color' />
                          <span>${duration}</span>
                        </div>
                        <ul class="more_about_courses">
                          <li><a href="${settings.LMS_ROOT_URL.replace('https://','https://'+course_info['org']+'.')}/courses/${course_info['course_key']}/about" target="_blank">${_('About the training module')}</a></li>
                          <li><a href="${settings.LMS_ROOT_URL.replace('https://','https://'+course_info['org']+'.')}/courses/${course_info['course_key']}/stat_dashboard" target="_blank">${_('Statistics')}</a></li>
                          % if request.user.is_staff:
                          <li><a class="course-link" href="${course_info['url']}">${_('Course administration')}</a></li>
                          % endif
                        </ul>
                      </div>
                      <span style="clear:left;display:block;"></span>
                    </li>
                %endfor
              %endfor
            %endif
              <!-- new script -->
            </ul>
          %if libraries:
            %if len(libraries) > 0:
            <div class="libraries libraries-tab">
              <ul class="list-courses">
                %for library_info in sorted(libraries, key=lambda s: s['display_name'].lower() if s['display_name'] is not None else ''):
                <li class="course-item" data-status="libraries-tab">
                  <a class="library-link" href="${library_info['url']}">
                    <h3 class="course-title">${library_info['display_name']}</h3>

                    <div class="course-metadata">
                      <span class="course-org metadata-item">
                        <span class="label">${_("Organization:")}</span> <span class="value">${library_info['org']}</span>
                      </span>
                      <span class="course-num metadata-item">
                        <span class="label">${_("Course Number:")}</span>
                        <span class="value">${library_info['number']}</span>
                      </span>
                      % if not library_info["can_edit"]:
                        <span class="extra-metadata">${_("(Read-only)")}</span>
                      % endif
                    </div>
                  </a>
                </li>
                %endfor
              </ul>
            </div>

            %else:
            <!--<div class="notice notice-incontext notice-instruction notice-instruction-nocourses list-notices libraries-tab">
              <div class="notice-item">
                <div class="msg">
                    <h3 class="title">${_("Were you expecting to see a particular library here?")}</h3>
                    <div class="copy">
                        <p>${_('The library creator must give you access to the library. Contact the library creator or administrator for the library you are helping to author.')}</p>
                    </div>
                </div>
              </div>

              % if show_new_library_button:
              <div class="notice-item has-actions">
                <div class="msg">
                    <h3 class="title">${_('Create Your First Library')}</h3>
                    <div class="copy">
                        <p>${_('Libraries hold a pool of components that can be re-used across multiple courses. Create your first library with the click of a button!')}</p>
                    </div>
                </div>

              <ul class="list-actions">
                <li class="action-item">
                    <a href="#" class="action-primary action-create new-button action-create-library new-library-button"><span class="icon fa fa-plus icon-inline" aria-hidden="true"></span> ${_('Create Your First Library')}</a>
                </li>
              </ul>
              </div>
              % endif
            </div>-->
            %endif
            <!-- end courses end courses -->
          </span>
        %endif
      %endif


<!-- ONGLET MES MODULES -->
        <div class="up_list_courses next_list" id="generic_title">
          <h3>
            <img src="${static.url('images/th.svg')}" class='svg svg-class-title' />
            <span class="title-page-back">${_('My modules')}</span>
          </h3>
          <p>${_('You have at your disposal a library of training modules made available by Amundi. Select the module of your choice and launch the associated training campaign.')}</p>
        </div>
        <ul class="list-courses">
          <!-- new script -->
        %if amundi_template:
          %for a_t in amundi_template:
            %for q in a_t:
                ${q['courses_stats']}    
                <%
                course_info = q['course_info']
                course_key_id = q['course_key_id']
                is_true = q['is_true']
                courses_overviews = q['courses_overviews']
                courses_stats = q['courses_stats']
                categories = q['categories']
                course_img = q['course_img']
                course_start = q['course_start']
                course_end = q['course_end']
                course_end_compare = q['course_end_compare']
                course_start_compare = q['course_start_compare']
                duration = q['duration']
                %>

                <div id="${course_key_id}"></div>
                <li class="course-item modules_items" data-course-key="${course_info['course_key']}" data-status="template" data-search="${categories.lower().replace(' ','')}">
                  <div class="content_img">
                    <span class="img_${categories.lower().replace(' ','')}" /></span>
                    <img src="blank.gif" data-src="${course_img['raw']}" class="img_course b-lazy"/>
                    <span class="course_module_categ">${_(categories)}</span>
                  </div>
                  <div class="content_info">
                    % if request.user.is_staff:
                      <a class="course-link" href="${course_info['url']}">
                    % else:
                      <a class="course-link" href="#">
                    % endif
                      <h3 class="course-title">${course_info['display_name']}</h3>
                      <%
                          languagecourse = 'en'
                          if courses_stat:
                            languagecourse = courses_stat.language
                      %>
                      <span class="language_display">${_('Language')} : ${_(language_options_dict[languagecourse])} </span>
                    </a>
                    <!--<div class="all_dates">
                      <ul>
                        <li><span>${_('Starting date')} :</span> <span>${course_start}</span></li>
                        <li><span>${_('Ending date')} :</span> <span>${course_end}</span></li>
                        <span style="display:block;clear:left;"></span>
                      </ul>
                    </div>
                    <div class="all_dates">
                      <ul>
                        <li><span>${course_info['org']}</span></li>
                        <span style="display:block;clear:left;"></span>
                      </ul>
                    </div>-->
                    <div class="duration_course">
                      <img src="${static.url('images/duree.svg')}" class='svg timer_svg_color' />
                      <span>${duration}</span>
                    </div>
                    <ul class="more_about_courses">
                      <li><a href="${settings.LMS_ROOT_URL.replace('https://','https://'+course_info['org']+'.')}/courses/${course_info['course_key']}/about" target="_blank">${_('About the training module')}</a></li>
        	            % if not request.user.is_staff and check_admin_microsite:
                            <li><a href="/settings/create/${course_info['course_key']}">${_("Create my campaign")}</a></li>
        		          % endif
                      % if request.user.is_staff:
                      <li><a class="course-link" href="${course_info['url']}">${_('Course administration')}</a></li>
                      <li><a class="course-link" href="/course_rerun/${course_info['course_key']}">${_('Re-run Course')}</a></li>
                      % endif
                    </ul>
                  </div>
                  <span style="clear:left;display:block;"></span>
                </li>
            %endfor
          %endfor
        %endif
        </ul>
      </div>

  <!-- fin de ici les cours -->

<!-- SI AUCUN MODULE %if len(courses) = 0-->
      %else:
    <!--<div class="notice notice-incontext notice-instruction notice-instruction-nocourses list-notices courses-tab active">

        %if course_creator_status == "granted":
        <div class="notice-item has-actions">
          <div class="msg">
            <h3 class="title">${_('Create Your First Course')}</h3>
            <div class="copy">
              <p>${_('Your new course is just a click away!')}</p>
            </div>
          </div>

          <ul class="list-actions">
            <li class="action-item">
              <a href="#" class="action-primary action-create action-create-course new-course-button"><span class="icon fa fa-plus icon-inline" aria-hidden="true"></span> ${_('Create Your First Course')}</a>
            </li>
          </ul>
        </div>
        % endif
      </div>-->
      <div id="no_course">
        <p>${_("No training campaign has been set")}.</p>
        <p>${_("To Create a training campaign")}, ${_("select a training module in")} <span>${_("My Modules")}</span></button>, ${_("then click on")} <span>${_("Create my campaign")}</span>.</p>
      </div>
    </section>
  </div>
      % endif


      %if course_creator_status == "unrequested":
      <div class="wrapper wrapper-creationrights">
        <h3 class="title">
          <a href="#instruction-creationrights" class="ui-toggle-control show-creationrights"><span class="label">${_('Becoming a Course Creator in {studio_name}').format(studio_name=settings.STUDIO_SHORT_NAME)}</span> <span class="icon fa fa-times-circle" aria-hidden="true"></span></a>
        </h3>

        <div class="notice notice-incontext notice-instruction notice-instruction-creationrights ui-toggle-target" id="instruction-creationrights">
          <div class="copy">
            <p>${_('{studio_name} is a hosted solution for our xConsortium partners and selected guests. Courses for which you are a team member appear above for you to edit, while course creator privileges are granted by {platform_name}. Our team will evaluate your request and provide you feedback within 24 hours during the work week.').format(
              studio_name=settings.STUDIO_NAME, platform_name=settings.PLATFORM_NAME)}</p>
          </div>

          <div class="status status-creationrights is-unrequested">
            <h4 class="title">${_('Your Course Creator Request Status:')}</h4>

            <form id="request-coursecreator" action="${request_course_creator_url}" method="post" enctype="multipart/form-data">
              <div class="form-actions">
                <button type="submit" id="request-coursecreator-submit" name="request-coursecreator-submit" class="action-primary action-request"><span class="icon fa fa-cog icon-inline fa fa-spin" aria-hidden="true"></span> <span class="label">${_('Request the Ability to Create Courses')}</span></button>
              </div>
            </form>
          </div>
        </div>
      </div>

      %elif course_creator_status == "denied":
      <div class="wrapper wrapper-creationrights is-shown">
        <h3 class="title">
          <a href="#instruction-creationrights" class="ui-toggle-control current show-creationrights"><span class="label">${_('Your Course Creator Request Status')}</span> <span class="icon fa fa-times-circle" aria-hidden="true"></span></a>
        </h3>

        <div class="notice notice-incontext notice-instruction notice-instruction-creationrights ui-toggle-target" id="instruction-creationrights">
          <div class="copy">
            <p>${_('{studio_name} is a hosted solution for our xConsortium partners and selected guests. Courses for which you are a team member appear above for you to edit, while course creator privileges are granted by {platform_name}. Our team is has completed evaluating your request.').format(
              studio_name=settings.STUDIO_NAME, platform_name=settings.PLATFORM_NAME,
            )}</p>
          </div>

          <div class="status status-creationrights has-status is-denied">
            <h4 class="title">${_('Your Course Creator Request Status:')}</h4>

            <dl class="status-update">
              <dt class="label">${_('Your Course Creator request is:')}</dt>
              <dd class="value">
                <span class="status-indicator"></span>
                <span class="value-formal">${_('Denied')}</span>
                <span class="value-description">${_('Your request did not meet the criteria/guidelines specified by {platform_name} Staff.').format(platform_name=settings.PLATFORM_NAME)}</span>
              </dd>
            </dl>
          </div>
        </div>
      </div>

      %elif course_creator_status == "pending":
      <div class="wrapper wrapper-creationrights is-shown">
        <h3 class="title">
          <a href="#instruction-creationrights" class="ui-toggle-control current show-creationrights"><span class="label">${_('Your Course Creator Request Status')}</span> <span class="icon fa fa-times-circle" aria-hidden="true"></span></a>
        </h3>

        <div class="notice notice-incontext notice-instruction notice-instruction-creationrights ui-toggle-target" id="instruction-creationrights">
          <div class="copy">
            <p>${_('{studio_name} is a hosted solution for our xConsortium partners and selected guests. Courses for which you are a team member appear above for you to edit, while course creator privileges are granted by {platform_name}. Our team is currently  evaluating your request.').format(
              studio_name=settings.STUDIO_NAME, platform_name=settings.PLATFORM_NAME,
            )}</p>
          </div>

          <div class="status status-creationrights has-status is-pending">
            <h4 class="title">${_('Your Course Creator Request Status:')}</h4>

            <dl class="status-update">
              <dt class="label">${_('Your Course Creator request is:')}</dt>
              <dd class="value">
                <span class="status-indicator"></span>
                <span class="value-formal">${_('Pending')}</span>
                <span class="value-description">
                  ${_('Your request is currently being reviewed by {platform_name} staff and should be updated shortly.').format(platform_name=settings.PLATFORM_NAME)}
                </span>
              </dd>
            </dl>
          </div>
        </div>
      </div>
      % endif
      % if is_programs_enabled:
        % if len(programs) > 0:
          <div class="programs programs-tab">
            <!-- Classes related to courses are intentionally reused here, to duplicate the styling used for course listing. -->
            <ul class="list-courses">
              % for program in programs:
              <li class="course-item">

                <a class="program-link" href=${program_authoring_url + str(program['id'])}>
                  <h3 class="course-title">${program['name']}</h3>

                  <div class="course-metadata">
                    <span class="course-org metadata-item">
                      <!-- As of this writing, programs can only be owned by one organization. If that constraint is relaxed, this will need to be revisited. -->
                      <span class="label">${_("Organization:")}</span> <span class="value">${program['organizations'][0]['key']}</span>
                    </span>
                  </div>
                </a>

              </li>
              % endfor
            </ul>
          </div>

        % else:
          <div class="notice notice-incontext notice-instruction notice-instruction-nocourses list-notices programs-tab">
            <div class="notice-item has-actions">

              <div class="msg">
                <h3 class="title">${_("You haven't created any programs yet.")}</h3>
                <div class="copy">
                  <p>${_("Programs are groups of courses related to a common subject.")}</p>
                </div>
              </div>

              <ul class="list-actions">
                <li class="action-item">
                  <a href=${program_authoring_url + 'new'} class="action-primary action-create new-button action-create-program new-program-button"><span class="icon fa fa-plus icon-inline" aria-hidden="true"></span> ${_('Create Your First Program')}</a>
                </li>
              </ul>

            </div>
          </div>
        % endif
      % endif


    </article>
  </section>
  <style>
  .active_s_atp,.active_s_atp:focus,.active_s_atp:hover {
    color: #fff !important;
  }
  .active_s_atp#fundamental_search,.active_s_atp#fundamental_search:focus,.active_s_atp#fundamental_search:hover {
    background-color: rgb(0,84,131) !important;
    color: #fff !important;
  }
  .active_s_atp#oursolutions_search,.active_s_atp#oursolutions_search:hover,.active_s_atp#oursolutions_search:focus {
    background-color: rgb(160,120,40) !important;
    color: #fff !important;
  }
  .active_s_atp#salesapproach_search,.active_s_atp#salesapproach_search:focus,.active_s_atp#salesapproach_search:hover {
    background-color: rgb(200,50,80) !important;
    color: #fff !important;
  }
  .active_s_atp#regulatory_search,.active_s_atp#regulatory_search:hover,.active_s_atp#regulatory_search:focus {
    background-color: rgb(57,178,182) !important;
    color: #fff !important;
  }
  .active_s_atp#softskills_search,.active_s_atp#softskills_search:hover,.active_s_atp#softskills_search:focus {
    background-color: #39B2B6 !important;
    color: #fff !important;
  }
  .active_s_atp#expert_search,.active_s_atp#expert_search:hover,.active_s_atp#expert_search:focus {
    background-color: #004F9B !important;
    color: #fff !important;
  }
  #campaign_search,#module_search {
    border: 1px solid rgb(200, 200, 200);
    padding: 10px;
    width: calc(30% - 22px);
    padding-top: 25px;
    padding-bottom: 25px;
    float: left;
    margin-top: 40px;
  }
  #category_block_campaign {
    text-align: center;
  }
  #search_block_campaign {
    margin-top: 5px;
    margin-bottom: 5px;
  }
  #category_block_campaign button,#category_block_campaign button:hover,#category_block_campaign button:focus {
    border-radius: 5px;
    background-color: transparent;
    outline: none;
    height: 38px;
    padding-left: 5px;
    padding-right: 5px;
    margin-left: 3px;
    margin-right: 3px;
    font-size: 13px;
    font-weight: bold;
    width: calc(25% - 6px);
    display: block;
    float: left;
    text-shadow: none;
    color: rgb(102,102,102);
    font-size: 13px;
    font-weight: normal;
  }
  #campaign_search h2,#module_search h2 {
    font-family: "mywebfont";
    font-size: 16px;
    font-weight: bold;
    color: #05144d;
  }
  .search_result p{
    color: #666;
    margin-top: 10px !important;
    font-size: 14px !important;
  }
  .search_result button,.search_result button:hover,.search_result button:focus{
    color: #fff !important;
    border: none !important;
    background-image: none !important;
    border-radius: 5px !important;
    background-color: #31aeee !important;
    font-family: "mywebfont";
    font-size: 14px;
  }
  .is_hidden_atp {
    /*visibility: hidden;*/
    display: none;
  }
  #fundamental_search {
    border: 2px solid #005483;
  }
  #oursolutions_search {
    border: 2px solid #a07828;
  }
  #salesapproach_search {
    border: 2px solid #c83250;
  }
  #regulatory_search {
    border: 2px solid #39B2C0;
  }
  #softskills_search{
    border: 2px solid #39B2B6;
  }
  #expert_search{
    border:2px solid #004F9F;
  }

  ::-webkit-input-placeholder {
      font-style: italic;
  }
  ::-moz-placeholder {
      font-style: italic;
  }
  :-ms-input-placeholder {
      font-style: italic;
  }
  .step-numbers{
    padding: 4px 9px;
    background-color: gray;
    border-radius: 100%;
    color: white;
  }
  .step-info{
    margin-bottom: 40px;
  }
  .language_display{
    font-size: 13px;
    font-style: italic;
    font-family: "mywebfont";
    color: #05144d;
    font-weight: 600;
  }

  #category_block button, #category_block button:hover, #category_block button:focus {
    font-size: 13px !important;
    color: rgb(102,102,102) !important;
    font-weight: normal !important;
  }
  </style>



  <!-- block recherche campagne -->
  <div id="campaign_search" class="is_show_atp">
    <h2>${_("SEARCH IN MY CAMPAIGNS")}…</h2>
    <div id="search_block_campaign">
      <input type="text" name="text" value="" placeholder='${_("Search for a campaign")}'/>
      <button class="action_search_campaign"></button>
      <span class="is_block_clear"></span>
    </div>
    <div id="category_block_campaign">
      <button class="action_search" id="fundamental_search" data-categ="fundamental">${_("Fundamentals")}</button>
      <button class="action_search" id="oursolutions_search" data-categ="oursolutions">${_("Our solutions")}</button>
      <button class="action_search" id="salesapproach_search" data-categ="salesapproach">${_("Sales approach")}</button>
      <button class="action_search" id="regulatory_search" data-categ="regulatory">${_("Regulatory")}</button>
      <button class="action_search" id="softskills_search" data-categ="softskills">${_("SoftSkills")}</button>
      <button class="action_search" id="expert_search" data-categ="expert">${_("Expert")}</button>
      <span class="is_block_clear"></span>
    </div>
    <div class="search_result is_hide_atp">
      <p class="is_hidden_atp p_1">${_("No match! Please, try a new search")}.</p>
      <p class="is_hidden_atp p_2"><span></span> ${_("results found in your campaigns")}.</p>
      <button>${_("New search")}</button>
    </div>
  </div>
  <!-- block recherche module -->
    <div id="module_search" class="is_hide_atp">
      <h2>${_("SEARCH IN MY MODULES")}…</h2>
      <div id="search_block">
        <input type="text" name="text" value="" placeholder='${_("Search in a module")}'/>
        <button class="action_search"></button>
        <span class="is_block_clear"></span>
      </div>
      <div id="category_block">
        <button class="action_search" id="fundamental_search" data-categ="fundamental">${_("Fundamentals")}</button>
        <button class="action_search" id="oursolutions_search" data-categ="oursolutions">${_("Our solutions")}</button>
        <button class="action_search" id="salesapproach_search" data-categ="salesapproach">${_("Sales approach")}</button>
        <button class="action_search" id="regulatory_search" data-categ="regulatory">${_("Regulatory")}</button>
        <button class="action_search" id="softskills_search" data-categ="softskills">${_("SoftSkills")}</button>
        <button class="action_search" id="expert_search" data-categ="expert">${_("Expert")}</button>
        <span class="is_block_clear"></span>
      </div>
      <div class="search_result is_hide_atp">
        <p class="is_hidden_atp p_1">${_("No match! Please, try a new search")}.</p>
        <p class="is_hidden_atp p_2"><span></span> ${_("results found in your modules")}.</p>
        <button>${_("New search")}</button>
      </div>
    </div>
    <aside class="content-supplementary" role="complementary">
      <div class="bit">
        % if LANGUAGE_CODE == 'fr':
        <span id="info_my_campaign">
          <h3 class="title title-3">${_('WHAT YOU CAN DO')}…</h3>
          <div class="step-info">
            <p><span class="step-numbers">1</span>  <strong>Administrer ma campagne</strong></p>
            <h5>Dans mes campagnes créées, vous administrez la campagne de formation :</h5>
            <ul class="list">
              <li>- Date de début / date de fin</li>
              <li>- Pourcentage de réussite minimum requis</li>
              <li>- Campagne obligatoire ou facultative</li>
            </ul>
            <h5>Ces paramètres peuvent être modifiés tout au long de votre campagne de formation.</h5>
          </div>

          <div class="step-info">
            <p><span class="step-numbers">2</span> <strong> Inviter des participants</strong></p>
            <h5>Dans mes campagnes en cours, vous invitez des participants à la campagne de formation :</h5>
            <ul class="list">
              <li>- Il faut impérativement que la date de début de la campagne de formation paramétrée soit antérieure à la date de chargement du fichier des participants</li>
              <li>- Vous pouvez inviter des participants tout au long de la campagne de formation</li>
            </ul>
          </div>

          <div class="step-info">
            <p><span class="step-numbers">3</span> <strong>Envoyer un email aux participants</strong></p>
            <h5>Dans mes campagnes en cours, vous pouvez envoyer un email avec un contenu personnalisé aux participants :</h5>
            <ul class="list">
              <li>- Ce peut être un email de relance pour rappeler aux participants que la campagne de formation touche bientôt à sa fin, pour formuler que la campagne de formation est obligatoire, etc.</li>
              <li>- Cet email peut être envoyé à tous les participants ou à une liste de destinataires personnalisée</li>
            </ul>
          </div>

          <div class="step-info">
            <p><span class="step-numbers">4</span> <strong>Statistiques</strong></p>
            <h5>Dans mes campagnes en cours, vous pouvez accéder aux statistiques de la campagne de formation en cours : taux de participation, résultats par participant, etc.</h5>
            <h5>Dans mes campagnes terminées, vous pouvez accéder aux statistiques de la campagne de formation après la fin de celle-ci : taux de participation, résultats par participant, etc.</h5>
            </ul>
          </div>
        </span>



        <span id="info_my_module">
          <h3 class="title title-3">CE QUE VOUS POUVEZ FAIRE…</h3>
          <p>Dans mes modules:</p>
          <ul class="list">
            <li>- Accédez à la bibliothèque des modules de formation mise à disposition par Amundi</li>
            <li>- Créez une campagne de formation associée au module que vous aurez sélectionné en cliquant sur « Créer ma campagne »</li>
          </ul>
        </span>

        % elif LANGUAGE_CODE == 'cs':
        <span id="info_my_campaign">
          <h3 class="title title-3">${_('WHAT YOU CAN DO')}…</h3>
          <div class="step-info">
            <p><span class="step-numbers">1</span>  <strong>Spravujte své kampaně</strong></p>
            <h5>Ve vytvořených kampaních můžete spravovat:</h5>
            <ul class="list">
              <li>- datum začátku/konce</li>
              <li>- minimální procento pro úspěšné splnění</li>
              <li>- povinnost/volitelnost kampaně</li>
            </ul>
            <h5>Tyto parametry můžete kdykoliv upravit.</h5>
          </div>

          <div class="step-info">
            <p><span class="step-numbers">2</span> <strong> Pozvěte účastníky</strong></p>
            <h5>U probíhajících vytvořených kampaní můžete pozvat účastníky:</h5>
            <ul class="list">
              <li>- účastníky lze pozvat pouze do již probíhající kampaně (začátek data musí být přesažen)</li>
              <li>- do probíhající kampaně můžete kdykoliv přizvat i další účastníky</li>
            </ul>
          </div>

          <div class="step-info">
            <p><span class="step-numbers">3</span> <strong>Pošlete emaily účastníkům</strong></p>
            <h5>U probíhajících kampaní můžete kdykoliv poslat personalizovaný email:</h5>
            <ul class="list">
              <li>- Můžete vytvořit email, abyste připomněli účastníkům vzdělávací kurz, či jim poslat odkaz na nové materiály</li>
              <li>- Email může být zaslán na všechny účastníky neboi jen na některé</li>
            </ul>
          </div>

          <div class="step-info">
            <p><span class="step-numbers">4</span> <strong>Statistiky</strong></p>
            <h5>V probíhajících kampaních můžete prohlížet následující statistiky: míra účasti, míra úspěšnosti, skóre dle jednotlivých účastníků atd.</h5>
            </ul>
          </div>
        </span>

        <span id="info_my_module">
          <h3 class="title title-3">${_('WHAT YOU CAN DO')}…</h3>
          <p>${_('My modules:')}</p>
          <ul class="list">
            <li>- ${_('Access the training modules library provided by Amundi')}</li>
            <li>- ${_('Create a training campaign associated to the module you selected by clicking on "Create my Campaign"')}</li>
          </ul>
        </span>

        % else:
        <span id="info_my_campaign">
          <h3 class="title title-3">${_('WHAT YOU CAN DO')}…</h3>
          <div class="step-info">
            <p><span class="step-numbers">1</span>  <strong>Manage my campaign</strong></p>
            <h5>In created training campaigns , you can manage your training campaign:</h5>
            <ul class="list">
              <li>- Starting / Ending date</li>
              <li>- Minimum percentage of success required</li>
              <li>- Mandatory or optional training campaign</li>
            </ul>
            <h5>These parameters can be modified all along the training campaign.</h5>
          </div>

          <div class="step-info">
            <p><span class="step-numbers">2</span> <strong>Invite participants</strong></p>
            <h5>In in progress training campaigns, your can invite participants to your training campaign:</h5>
            <ul class="list">
              <li>- Starting date has to be exceeded to invite participants </li>
              <li>- You can invite participants all along the training campaign</li>
            </ul>
          </div>

          <div class="step-info">
            <p><span class="step-numbers">3</span> <strong>Send email to participants</strong></p>
            <h5>In in progress training campaigns, you can send a personalized email to participants:</h5>
            <ul class="list">
              <li>- It can be an email to remind participants the training campaign will end soon, the training campaign is mandatory, etc. </li>
              <li>- Email can be sent to all participants or to a customized mailing list</li>
            </ul>
          </div>

          <div class="step-info">
            <p><span class="step-numbers">4</span> <strong>Statistics</strong></p>
            <h5>In in progress training campaigns, you can access statistics of the in progress training campaign: participation rate, success rate, score by participant, etc. </h5>
            <h5>In completed training campaigns, you can access statistics of the training campaign after it ended: participation rate, success rate, score by participant, etc.</h5>
            </ul>
          </div>

        </span>


        <span id="info_my_module">
          <h3 class="title title-3">${_('WHAT YOU CAN DO')}…</h3>
          <p>${_('My modules:')}</p>
          <ul class="list">
            <li>- ${_('Access the training modules library provided by Amundi')}</li>
            <li>- ${_('Create a training campaign associated to the module you selected by clicking on "Create my Campaign"')}</li>
          </ul>
        </span>
        % endif
      </div>

    </aside>
  % else:
  <section class="content">
    <article class="content-primary" role="main">
      <div class="introduction">
        <h2 class="title">${_("Thanks for signing up, {name}!").format(name=user.username)}</h2>
      </div>

      <div class="notice notice-incontext notice-instruction notice-instruction-verification">
        <div class="msg">
          <h3 class="title">${_("We need to verify your email address")}</h3>
          <div class="copy">
            <p>${_('Almost there! In order to complete your sign up we need you to verify your email address ({email}). An activation message and next steps should be waiting for you there.').format(email=user.email)}</p>
          </div>
        </div>
      </div>
    </article>

    <aside class="content-supplementary" role="complementary">
      <div class="bit">
        <h3 class="title title-3">${_('Need help?')}</h3>
        <p>${_('Please check your Junk or Spam folders in case our email isn\'t in your INBOX. Still can\'t find the verification email? Request help via the link below.')}</p>
      </div>
    </aside>
  </section>

  %endif
</div>
<div style="clear:both"></div>
<%
log.info("timer 9 {}".format(datetime.datetime.now()))
%>
</%block>
